{"ast":null,"code":"import { BehaviorSubject, map, of, switchMap, tap, throwError } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nclass QuickChatService {\n  /**\n   * Constructor\n   */\n  constructor(_httpClient) {\n    this._httpClient = _httpClient;\n    this._chat = new BehaviorSubject(null);\n    this._chats = new BehaviorSubject(null);\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Accessors\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Getter for chat\n   */\n  get chat$() {\n    return this._chat.asObservable();\n  }\n  /**\n   * Getter for chat\n   */\n  get chats$() {\n    return this._chats.asObservable();\n  }\n  // -----------------------------------------------------------------------------------------------------\n  // @ Public methods\n  // -----------------------------------------------------------------------------------------------------\n  /**\n   * Get chats\n   */\n  getChats() {\n    return this._httpClient.get('api/apps/chat/chats').pipe(tap(response => {\n      this._chats.next(response);\n    }));\n  }\n  /**\n   * Get chat\n   *\n   * @param id\n   */\n  getChatById(id) {\n    return this._httpClient.get('api/apps/chat/chat', {\n      params: {\n        id\n      }\n    }).pipe(map(chat => {\n      // Update the chat\n      this._chat.next(chat);\n      // Return the chat\n      return chat;\n    }), switchMap(chat => {\n      if (!chat) {\n        return throwError('Could not found chat with id of ' + id + '!');\n      }\n      return of(chat);\n    }));\n  }\n  static #_ = this.ɵfac = function QuickChatService_Factory(t) {\n    return new (t || QuickChatService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: QuickChatService,\n    factory: QuickChatService.ɵfac,\n    providedIn: 'root'\n  });\n}\nexport { QuickChatService };","map":{"version":3,"names":["BehaviorSubject","map","of","switchMap","tap","throwError","QuickChatService","constructor","_httpClient","_chat","_chats","chat$","asObservable","chats$","getChats","get","pipe","response","next","getChatById","id","params","chat","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\jcfaz\\Downloads\\Projects\\desafio-afiliado\\front\\src\\app\\layout\\common\\quick-chat\\quick-chat.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { BehaviorSubject, map, Observable, of, switchMap, tap, throwError } from 'rxjs';\r\nimport { Chat } from '../../../../app/layout/common/quick-chat/quick-chat.types';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class QuickChatService\r\n{\r\n    private _chat: BehaviorSubject<Chat> = new BehaviorSubject(null);\r\n    private _chats: BehaviorSubject<Chat[]> = new BehaviorSubject<Chat[]>(null);\r\n\r\n    /**\r\n     * Constructor\r\n     */\r\n    constructor(private _httpClient: HttpClient)\r\n    {\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------\r\n    // @ Accessors\r\n    // -----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Getter for chat\r\n     */\r\n    get chat$(): Observable<Chat>\r\n    {\r\n        return this._chat.asObservable();\r\n    }\r\n\r\n    /**\r\n     * Getter for chat\r\n     */\r\n    get chats$(): Observable<Chat[]>\r\n    {\r\n        return this._chats.asObservable();\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------\r\n    // @ Public methods\r\n    // -----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Get chats\r\n     */\r\n    getChats(): Observable<any>\r\n    {\r\n        return this._httpClient.get<Chat[]>('api/apps/chat/chats').pipe(\r\n            tap((response: Chat[]) => {\r\n                this._chats.next(response);\r\n            })\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Get chat\r\n     *\r\n     * @param id\r\n     */\r\n    getChatById(id: string): Observable<any>\r\n    {\r\n        return this._httpClient.get<Chat>('api/apps/chat/chat', {params: {id}}).pipe(\r\n            map((chat) => {\r\n\r\n                // Update the chat\r\n                this._chat.next(chat);\r\n\r\n                // Return the chat\r\n                return chat;\r\n            }),\r\n            switchMap((chat) => {\r\n\r\n                if ( !chat )\r\n                {\r\n                    return throwError('Could not found chat with id of ' + id + '!');\r\n                }\r\n\r\n                return of(chat);\r\n            })\r\n        );\r\n    }\r\n}\r\n"],"mappings":"AAEA,SAASA,eAAe,EAAEC,GAAG,EAAcC,EAAE,EAAEC,SAAS,EAAEC,GAAG,EAAEC,UAAU,QAAQ,MAAM;;;AAGvF,MAGaC,gBAAgB;EAKzB;;;EAGAC,YAAoBC,WAAuB;IAAvB,KAAAA,WAAW,GAAXA,WAAW;IANvB,KAAAC,KAAK,GAA0B,IAAIT,eAAe,CAAC,IAAI,CAAC;IACxD,KAAAU,MAAM,GAA4B,IAAIV,eAAe,CAAS,IAAI,CAAC;EAO3E;EAEA;EACA;EACA;EAEA;;;EAGA,IAAIW,KAAKA,CAAA;IAEL,OAAO,IAAI,CAACF,KAAK,CAACG,YAAY,EAAE;EACpC;EAEA;;;EAGA,IAAIC,MAAMA,CAAA;IAEN,OAAO,IAAI,CAACH,MAAM,CAACE,YAAY,EAAE;EACrC;EAEA;EACA;EACA;EAEA;;;EAGAE,QAAQA,CAAA;IAEJ,OAAO,IAAI,CAACN,WAAW,CAACO,GAAG,CAAS,qBAAqB,CAAC,CAACC,IAAI,CAC3DZ,GAAG,CAAEa,QAAgB,IAAI;MACrB,IAAI,CAACP,MAAM,CAACQ,IAAI,CAACD,QAAQ,CAAC;IAC9B,CAAC,CAAC,CACL;EACL;EAEA;;;;;EAKAE,WAAWA,CAACC,EAAU;IAElB,OAAO,IAAI,CAACZ,WAAW,CAACO,GAAG,CAAO,oBAAoB,EAAE;MAACM,MAAM,EAAE;QAACD;MAAE;IAAC,CAAC,CAAC,CAACJ,IAAI,CACxEf,GAAG,CAAEqB,IAAI,IAAI;MAET;MACA,IAAI,CAACb,KAAK,CAACS,IAAI,CAACI,IAAI,CAAC;MAErB;MACA,OAAOA,IAAI;IACf,CAAC,CAAC,EACFnB,SAAS,CAAEmB,IAAI,IAAI;MAEf,IAAK,CAACA,IAAI,EACV;QACI,OAAOjB,UAAU,CAAC,kCAAkC,GAAGe,EAAE,GAAG,GAAG,CAAC;;MAGpE,OAAOlB,EAAE,CAACoB,IAAI,CAAC;IACnB,CAAC,CAAC,CACL;EACL;EAAC,QAAAC,CAAA,G;qBA1EQjB,gBAAgB,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAhBtB,gBAAgB;IAAAuB,OAAA,EAAhBvB,gBAAgB,CAAAwB,IAAA;IAAAC,UAAA,EAFb;EAAM;;SAETzB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}